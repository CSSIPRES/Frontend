
<!--  <h1 mat-dialog-title>
   Demande d'Immatriculation
  </h1> -->
  <div  fxLayoutAlign="space-between center">
    <h1 mat-dialog-title>Demande d'immatriculation</h1>
     <button mat-dialog-title mat-button class="close-icon" [mat-dialog-close]="true">
          <mat-icon color="warn">close</mat-icon>
      </button>
  </div>
 
      <div  mat-dialog-content>
      <div *ngIf="loader"  class="center">
          <mat-progress-spinner strokeWidth="3" diameter=35 mode="indeterminate"color="primary">
          </mat-progress-spinner>
      </div> 
     
      <form [formGroup]="immatForm">    
      <mat-horizontal-stepper formGroupName="input"  #stepper class="mt-1">
      <mat-step *ngIf="!immatDip"   label="Information General" state="phone">
      <div class="mt-5" formGroupName="mainRegistrationForm">
      <ng-template matStepLabel>
        <span [ngStyle]="{'color': immatForm.get('input').get('mainRegistrationForm').valid ? 'rgb(14, 189, 8)' : ''}">Information General</span>
      </ng-template> 
      <div class="mt-3" fxLayout="row" fxLayoutGap="5%">
      <mat-form-field  appearance="outline">
        <mat-label>Sigle</mat-label>
        <input matInput formControlName="shortName"/>
        <mat-icon matSuffix>building</mat-icon>
        <!-- <div *ngIf="shortName."> -->
      <mat-error >Ce champ est obligatoire</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Activite principale </mat-label>
        <mat-select (selectionChange)="selectSector($event)" formControlName="mainLineOfBusiness" required>
          <perfect-scrollbar style="height: 100%;">
          <mat-option *ngFor="let mainSector of listactivitePrincipal.items" [value]="mainSector.activitesprincipal">{{ mainSector.activitesprincipal }}</mat-option>
          </perfect-scrollbar>
        </mat-select>
        <mat-icon matSuffix>perm_identity</mat-icon>
        <mat-error>Ce champ est obligatoire</mat-error>
      </mat-form-field> 
     </div>   
     <div class="mt-3" fxLayout="row" fxLayoutGap="1%">
      <mat-form-field  appearance="outline">
        <mat-label>Date d'inscription</mat-label>
        <input (dateChange)="compareDate($event)" matInput formControlName="dateOfInspection"  required
        [matDatepicker]="dateOfInspection">
        <mat-datepicker-toggle matSuffix [for]="dateOfInspection"></mat-datepicker-toggle>
        <mat-datepicker #dateOfInspection></mat-datepicker>
        <mat-error>
          Ce champs est obligatoire 
        </mat-error>
      </mat-form-field>
      <mat-form-field    appearance="outline">
        <mat-label>Date embauche premier salarie </mat-label>
        <input (dateChange)="compareDate($event)"  matInput formControlName="dateOfFirstHire"  required
        [matDatepicker]="dateOfFirstHire">
        <mat-datepicker-toggle matSuffix [for]="dateOfFirstHire">
          <!-- <mat-icon matDatepickerToggleIcon>settings</mat-icon> -->
        </mat-datepicker-toggle>
        <mat-datepicker #dateOfFirstHire></mat-datepicker>
        <mat-error>
        Ce champ est obligatoire.
        </mat-error>
        <mat-hint class="text-danger" *ngIf="dateErrors">
          La date d'ouverture doit etre avant la date d'inscription
        </mat-hint> 
      </mat-form-field>
      <mat-form-field fxFlex="70"  appearance="outline">
        <mat-label>Secteur d'activite</mat-label>
        <input  matInput formControlName="businessSector" readonly required>  
        <mat-icon matSuffix>perm_identity</mat-icon>
        <mat-error>Ce champ est obligatoire</mat-error>
      </mat-form-field>
     </div>
     <div class="mt-3" fxLayout="row" fxLayoutGap="5%">
      
      <mat-form-field  appearance="outline">
        <mat-label>Region</mat-label>
        <mat-select (selectionChange)="selectRegion($event)"  formControlName="region" required>
          <mat-option  *ngFor="let r of listRegions.items"
           [value]="r.region">{{ r.region | titlecase }}</mat-option>
        </mat-select>
        <mat-icon matSuffix>map</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
      <mat-form-field  appearance="outline">
        <mat-label>Department</mat-label>
        <mat-select (selectionChange)="selectDepartement($event)"   formControlName="department" required>
          <mat-option *ngFor="let d of listD" [value]="d.departement">
            {{d.departement | titlecase }}</mat-option>
        </mat-select>
        <mat-icon matSuffix>work_outline</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
      <mat-form-field  appearance="outline">
        <mat-label>Arondissement</mat-label>
        <mat-select (selectionChange)="selectArrondissement($event)" formControlName="arondissement" required>
          <mat-option *ngFor="let ar of listA" [value]="ar.arrondissement">
            {{ar.arrondissement | titlecase}}</mat-option>
          
        </mat-select>
        <mat-icon matSuffix>work_outline</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
     </div>
     <div class="mt-3" fxLayout="row" fxLayoutGap="5%">
      <mat-form-field  fxFlex="30"  appearance="outline">
        <mat-label>Commune</mat-label>
        <mat-select (selectionChange)="selectCommne($event)" formControlName="commune" required>
          <mat-option *ngFor="let c of listC" [value]="c.commune">{{c.commune | titlecase}}</mat-option>
        </mat-select>
        <mat-icon matSuffix>work_outline</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
      <mat-form-field fxFlex="30"  appearance="outline">
        <mat-label>Quartie</mat-label>
        <mat-select formControlName="qartier" required>
           <mat-option *ngFor="let q of listQ" [value]="q.quartier">{{ q.quartier | titlecase}}</mat-option> 
        </mat-select>
        <mat-icon matSuffix>email</mat-icon>
        <mat-error>
          Ce champ est obligatoire.</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Addresse de l'entreprise</mat-label>
        <input matInput formControlName="address" required>
        <mat-icon matSuffix>email</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
     </div>
     <div class="mt-3" fxLayout="row" fxLayoutGap="5%">
      <mat-form-field appearance="outline">
        <mat-label>Email entreprise</mat-label>
        <input matInput formControlName="email">
        <mat-icon matSuffix>email</mat-icon>
        <mat-error *ngIf="email.hasError('required')">
          Ce champ est obligatoire.</mat-error>
        <mat-error *ngIf="email.hasError('pattern')" >
          Adresse email invalide.</mat-error>
      </mat-form-field>
     
      <mat-form-field appearance="outline">
        <mat-label>Site web</mat-label>
        <input matInput formControlName="website">
        <mat-icon matSuffix>email</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
     </div>
     <div  class="mt-3" fxLayout="row" fxLayoutGap="5%">
      <mat-form-field appearance="outline">
        <mat-label>Telephone Entreprise</mat-label>
        <input type="number" matInput formControlName="telephone" required>
        <mat-icon matSuffix> phone</mat-icon>
        <mat-error  *ngIf="telephone.hasError('required')">Le numero de telephone est obligatoire.</mat-error>
        <mat-error  *ngIf="telephone.hasError('pattern')">Numero de telephone invalide.</mat-error>
      </mat-form-field>
      <mat-form-field   appearance="outline">
        <mat-label>Nombre d'employes au regime general</mat-label>
        <input type="number" (blur)="validateNumbEmployee()" matInput formControlName="noOfWorkersInGenScheme" required>
        <mat-icon matSuffix>work_outline</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
      <mat-form-field  appearance="outline">
        <mat-label>Nombre d'employes au regime cadre</mat-label>
        <input type="number" (blur)="validateNumbEmployee()" matInput formControlName="noOfWorkersInBasicScheme" required>
        <mat-icon matSuffix>work_outline</mat-icon>
        <mat-error  *ngIf="noOfWorkersInBasicScheme.hasError('required')">Ce champ est obligatoire.</mat-error>
        <mat-hint class="text-danger" *ngIf="validNumbOfworker">Ce nombre doit etre inferieur au nombre d'employes en regime general.</mat-hint>
      </mat-form-field>
     </div>
     <div  class="mt-3" fxLayout="row" fxLayoutGap="5%">
       
    </div>
     <div fxLayoutAlign="end" fxLayoutGap="10%" >
      <button [disabled]="!immatForm.get('input').get('mainRegistrationForm').valid || validError"  class="submit-button" mat-raised-button matStepperNext>Suivant<mat-icon>arrow_forward</mat-icon></button>
    </div>
   
  </div>
  </mat-step>
  <mat-step *ngIf="!immatDom"  label="Information Employeur" state="chat">
    <div class="mt-5" formGroupName="employerQuery">
      <ng-template matStepLabel>
        <span [ngStyle]="{'color': immatForm.get('input').get('employerQuery').valid ? 'rgb(14, 189, 8)' : ''}">Information Employeur
        </span>
      </ng-template>
      <div fxLayout="row" fxLayoutGap="5%">
        <mat-form-field  appearance="outline">
          <mat-label>Type employe</mat-label>
          <mat-select (selectionChange)="selectForm($event)" formControlName="employerType" required>
            <mat-option value="PVT">Société privée</mat-option>
            <mat-option value="TIND">Travailleur indépendant</mat-option>
            <mat-option value="REP_DIP">Représentation diplomatique</mat-option>
            <mat-option value="PUB_PARA">Structure publique et parapublique</mat-option>
            <mat-option value="PROJ">Société privée</mat-option>
            <mat-option value="NGO">ONG</mat-option>
            <mat-option value="MAIN">Maintien Affiliation</mat-option>
            <mat-option value="ASSO">Profession Libérale</mat-option>
            <mat-option value="LIB">Association</mat-option>
            <mat-option value="INDV">Entreprise Individuelle</mat-option>
            <mat-option value="GIE">GIE</mat-option>
            <mat-option value="DOM">Domestique</mat-option>
            <mat-option value="ONG">ONG</mat-option>
            <mat-option value="COOP">Coopérative</mat-option>
            <mat-option value="ASSO">Association</mat-option>  
          </mat-select>
          <mat-icon matSuffix>work_outline</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Raison sociale</mat-label>
          <input matInput formControlName="employerName" required>
          <mat-icon matSuffix>drag_handle</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
       </div>
       <div fxLayout="row" fxLayoutGap="5%">
        <mat-form-field *ngIf="controlPv" appearance="outline">
          <mat-label>Statut juridique</mat-label>
          <mat-select formControlName="legalStatus" required>
            <mat-option value="CONC">GIE</mat-option>
            <mat-option value="DEVP">Projet de développement</mat-option>
            <mat-option value="DIPR">Représentant diplomatique / Organisation International</mat-option>
            <mat-option value="ENTE">SA</mat-option>
            <mat-option value="LIBP">Profession Libérale</mat-option>
            <mat-option value="LOCE">SARL</mat-option>
            <mat-option value="PHYP">SUARL</mat-option>
            <mat-option value="PUB">Société en commandite</mat-option>
            <mat-option value="PUBP">Etablissement publique et parapublique</mat-option>
          </mat-select> 
          <mat-icon matSuffix>drag_handle</mat-icon>
          <mat-error >Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field  appearance="outline">
          <mat-label>Ninea Number</mat-label>
          <input (blur)="getNineaNumber()" matInput formControlName="nineaNumber" required>
          <mat-icon matSuffix> short_text</mat-icon>
         <mat-error *ngIf="nineaNumber.hasError('required')">Ce champs est obligatoire.</mat-error>
          <mat-error   
          *ngIf="(nineaNumber.hasError('maxlength'))||(nineaNumber.hasError('minlength'))">
          Le NINEA doit etre de 9 chiffres.</mat-error>
          <mat-hint class="text-danger"   
          *ngIf="nineaExist">
          Ce NINEA existe deja.</mat-hint>       
        </mat-form-field>
      </div>             
      <div fxLayout="row" fxLayoutGap="1%">
       <mat-form-field *ngIf="controlPv" fxFlex="50%"  fxLayoutGap="5%" appearance="outline">
        <mat-label>Type etablissement</mat-label>
        <mat-select formControlName="typeEtablissement" required>
          <mat-option value="HDQT">Siége</mat-option>
          <mat-option value="BRNC">Agence/Sucursale</mat-option>
          <mat-option value="CNST">Chantier</mat-option>
        </mat-select>
        <mat-icon matSuffix>people_outline</mat-icon>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field> 
      <mat-form-field *ngIf="controlPv" fxFlex="15%" appearance="outline">
        <mat-label>Date taxe</mat-label>
        <input matInput formControlName="taxIdDate" required [matDatepicker]="taxIdDate">
        <mat-datepicker-toggle matSuffix [for]="taxIdDate"></mat-datepicker-toggle>
        <mat-datepicker #taxIdDate></mat-datepicker>
        <mat-error>Ce champ est obligatoire.</mat-error>
      </mat-form-field>
      <mat-form-field *ngIf="controlPv"  appearance="outline">
        <mat-label>Date registre de commerce</mat-label>
        <input matInput formControlName="tradeRegisterDate" required [matDatepicker]="tradeRegisterDate">
        <mat-datepicker-toggle matSuffix [for]="tradeRegisterDate"></mat-datepicker-toggle>
        <mat-datepicker #tradeRegisterDate></mat-datepicker>
        <mat-error>Ce champ est obligatoire.</mat-error>   
      </mat-form-field>
      </div>
      <div *ngIf="controlPara" fxLayout="row" fxLayoutGap="5%">
        <mat-form-field appearance="outline">
          <mat-label>Arret decret</mat-label>
          <input matInput formControlName="arretOuDecret" required>
          <mat-icon matSuffix>drag_handle</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>                        
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Date arret decret</mat-label>
          <input matInput formControlName="dateArreteOuDecret" required>
          <mat-icon matSuffix>drag_handle</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
      </div>
      <div *ngIf="controlPara" fxLayout="row" fxLayoutGap="5%">
        <mat-form-field appearance="outline">
          <mat-label>estType</mat-label>
          <input matInput formControlName="estType" required>
          <mat-icon matSuffix>drag_handle</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>HQID</mat-label>
          <input matInput formControlName="hqId" required>
          <mat-icon matSuffix>drag_handle</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
      </div>
      <div *ngIf="controlPv" fxLayout="row" fxLayoutGap="5%">
        <mat-form-field  fxFlex="47.5%"  appearance="outline">
          <mat-label>Numero registre de commerce</mat-label>
          <input type="text" matInput formControlName="tradeRegisterNumber" placeholder="SN.AAA.0000.A.00000" required>
           <mat-error *ngIf="tradeRegisterNumber.hasError('required')">
            Ce champ est obligatoire.
          </mat-error>
          <mat-error *ngIf="tradeRegisterNumber.hasError('pattern')">
            Numero de registre de commerce invalide.
          </mat-error> 
        </mat-form-field > 
        
          <mat-form-field   *ngIf="typeEtablissement.value=='BRNC' || typeEtablissement.value=='CNST'"  appearance="outline">
            <mat-label>Ninet</mat-label>
            <input matInput formControlName="ninetNumber">
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field> 
          
      </div>
     
        <div fxLayoutAlign="end" fxLayoutGap="5%">
          <button mat-raised-button mat-button matStepperPrevious><mat-icon>arrow_back</mat-icon>Precedent</button>
          <button [disabled]="!immatForm.get('input').get('employerQuery').valid"  class="submit-button" mat-raised-button matStepperNext>Suivant<mat-icon>arrow_forward</mat-icon></button>
        </div> 
  </div>
    </mat-step>
    <mat-step *ngIf="!immatFormBoolean"  label="Representant legale" state="person_outlined">
      <div class="mt-5" formGroupName="legalRepresentativeForm">
        <ng-template matStepLabel> 
         <span [ngStyle]="{'color': immatForm.get('input').get('legalRepresentativeForm').valid ? 'rgb(14, 189, 8)' : ''}"> Representant legale</span></ng-template>
         <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline" >
            <mat-label>Nom</mat-label>
            <input matInput formControlName="lastName" required>
            <mat-icon matSuffix>person_outlined</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Prenom</mat-label>
            <input matInput formControlName="firstName" required>
            <mat-icon matSuffix>person_outlined</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Date Naissance</mat-label>
            <input (dateChange)="validDateNaissance($event)" matInput formControlName="birthdate" required [matDatepicker]="birthdate">
            <mat-datepicker-toggle matSuffix [for]="birthdate"></mat-datepicker-toggle>
            <mat-datepicker #birthdate></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
            <mat-hint class="text-danger" *ngIf="validDateNaiss">Vous devriez au moins avoir 18 ans.</mat-hint>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Nationalite</mat-label>
            <mat-select formControlName="nationality" required>
              <mat-option *ngFor="let listPay of listPays.items" [value]="listPay.descr">{{listPay.descr  | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>people_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Lieu de naissance</mat-label>
            <input matInput formControlName="placeOfBirth" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Ville de naissance</mat-label>
            <input matInput formControlName="cityOfBirth" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Type de piece</mat-label>
            <mat-select (selectionChange)="validationPiece($event)" formControlName="typeOfIdentity" required>
              <mat-option value="NIN">Carte national d'identite</mat-option>
              <mat-option value="CDEAO">Carte identité CDEAO</mat-option>
              <mat-option value="CONC">Carte Consulaire</mat-option>
              <mat-option value="PASS">Passport</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">    
            <mat-label>Numero de piece d'identite</mat-label>
            <input (blur)="getNinNumber()" type="number" matInput formControlName="nin" required>
            <mat-error *ngIf="nin.hasError('required')">Ce champ est obligatoire.</mat-error>
            <mat-error *ngIf="nin.hasError('pattern')">
              Numero de piece d'identite invalide</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Numero de telephone</mat-label>
            <input type="number" matInput formControlName="landLineNumber" required/>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field  appearance="outline">
            <mat-label>Date Delivrance</mat-label>
            <input (dateChange)="validationPiece($event)" matInput formControlName="issuedDate" required [matDatepicker]="issuedDate">
            <mat-datepicker-toggle matSuffix [for]="issuedDate"></mat-datepicker-toggle>
            <mat-datepicker #issuedDate></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Date Expiration</mat-label>
            <input (dateChange)="validationPiece($event)"  matInput formControlName="expiryDate" required [matDatepicker]="expiryDate">
            <mat-datepicker-toggle  matSuffix [for]="expiryDate"></mat-datepicker-toggle>
            <mat-datepicker #expiryDate></mat-datepicker>
            <!-- <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon> -->
            <mat-error>Ce champ est obligatoire.</mat-error>
            <mat-hint class="text-danger" *ngIf="validICN">
              La duree de votre <b class="text-danger">cni</b> validite doit etre de 10 ans.
            </mat-hint>  
            <mat-hint class="text-danger" *ngIf="validPassport">
              La duree de validite du <b class="text-danger">passport</b> doit etre 5 et 10 ans.
            </mat-hint>
          </mat-form-field>
        </div>
       <div fxLayout="row" fxLayoutGap="5%">
        <mat-form-field  appearance="outline">
          <mat-label>Region</mat-label>
          <mat-select (selectionChange)="selectRegion($event)" formControlName="region" required>
            <mat-option *ngFor="let r of listRegions.items" [value]="r.region">{{r.region | titlecase}}</mat-option>
          </mat-select>  
          <mat-icon matSuffix>work_outline</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field  appearance="outline">
          <mat-label>Departement</mat-label>
          <mat-select (selectionChange)="selectDepartement($event)"  formControlName="department" required>
            <mat-option *ngFor="let d of listD1" [value]="d.departement">
              {{d.departement | titlecase}}</mat-option>
          </mat-select>
          <mat-icon matSuffix>work_outline</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field  appearance="outline">
          <mat-label>Arrondissement</mat-label>
          <mat-select (selectionChange)=" selectArrondissement($event)" formControlName="arondissement" required>
            <mat-option *ngFor="let ar of listA1" [value]="ar.arrondissement">{{ar.arrondissement | titlecase}}</mat-option>
          </mat-select>
          <mat-icon matSuffix>work_outline</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>        
       </div>
       <div fxLayout="row" fxLayoutGap="5%">
        <mat-form-field  appearance="outline">
          <mat-label>Commune</mat-label>
          <mat-select (selectionChange)=" selectCommne($event)" formControlName="commune" required>
            <mat-option *ngFor="let c of listC1" [value]="c.commune">{{c.commune | titlecase}}</mat-option>
          </mat-select>
          <mat-icon matSuffix>work_outline</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Quartie</mat-label>
          <mat-select formControlName="qartier" required>
             <mat-option *ngFor="let q of listQ1" [value]="q.quartier">{{q.quartier | titlecase}}</mat-option> 
          </mat-select>
          <mat-icon matSuffix>email</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Adresse</mat-label>
          <input matInput formControlName="address" required>
          <mat-icon matSuffix>email</mat-icon>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
       </div>
       <div fxLayout="row" fxLayoutGap="5%"> 
        <mat-form-field appearance="outline">
          <mat-label>Email representant legal</mat-label>
          <input matInput formControlName="email" required>
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="email1.hasError('required')">
            Ce champ est obligatoire.</mat-error>
          <mat-error *ngIf="email1.hasError('pattern')" >
            Addresse email invalide.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Telephone Entreprise</mat-label>
          <input matInput formControlName="mobileNumber" required>
          <mat-icon matSuffix> phone</mat-icon>
          <mat-error *ngIf="mobileNumber.hasError('required')">Ce champ est obligatoire.</mat-error>
          <mat-error *ngIf="mobileNumber.hasError('pattern')">
            Ce numero de telephone est invalide.
          </mat-error>
        </mat-form-field>
       </div>
      <div fxLayoutAlign="end" fxLayoutGap="5%">
          <button mat-raised-button mat-button matStepperPrevious><mat-icon>arrow_back</mat-icon>Precedent</button>
          <button [disabled]="!immatForm.get('input').get('legalRepresentativeForm').valid || validError" class="submit-button" mat-raised-button matStepperNext>Suivant<mat-icon>arrow_forward</mat-icon></button>
      </div>
      
    </div> 
    </mat-step>
    <mat-step *ngIf="immatPara" label="Information contact" state="chat">
      <div class="mt-5" formGroupName="personneContact">
        <ng-template matStepLabel>
          <span [ngStyle]="{'color': immatForm.get('input').get('personneContact').valid ? 'rgb(14, 189, 8)' : ''}">Personne conact
          </span>
        </ng-template>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Nom</mat-label>
            <input matInput formControlName="nom" required>
            <mat-icon matSuffix>drag_handle</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Prenom</mat-label>
            <input matInput formControlName="nom" required>
            <mat-icon matSuffix>drag_handle</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Type de piece</mat-label>
            <mat-select (selectionChange)="validationPiece($event)" formControlName="typeOfIdentity" required>
              <mat-option value="NIN">Carte national d'identite</mat-option>
              <mat-option value="CDEAO">Carte identité CDEAO</mat-option>
              <mat-option value="CONC">Carte Consulaire</mat-option>
              <mat-option value="PASS">Passport</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
            
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Numero de piece d'identite</mat-label>
            <input type="number" matInput formControlName="nin" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
            <mat-error >
              Numero de piece d'identite invalide</mat-error>
          </mat-form-field>
  
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Numero telephone fixe </mat-label>
            <input type="number" matInput formControlName="telephoneFixe" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Numero telephone mobile </mat-label>
            <input type="number" matInput formControlName="numeroMobile" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Adresse email </mat-label>
            <input type="email" matInput formControlName="email" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayoutAlign="end" fxLayoutGap="5%">
          <button mat-raised-button mat-button matStepperPrevious><mat-icon>arrow_back</mat-icon>Precedent</button>
          <button [disabled]="!immatForm.get('input').get('personneContact').valid"  class="submit-button" mat-raised-button matStepperNext>Suivant<mat-icon>arrow_forward</mat-icon></button>
        </div> 
      </div>
     </mat-step>  
     <mat-step *ngIf="immatDip"  label="Information contact" state="chat">
      <div class="mt-5" formGroupName="domesticRegistrationForm"> 
        <ng-template matStepLabel>
          <span [ngStyle]="{'color': immatForm.get('input').get('domesticRegistrationForm').valid ? 'rgb(14, 189, 8)' : ''}">Formulaire registration
          </span>
        </ng-template>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Date embauche premier salarie</mat-label>
            <input  matInput formControlName="dateEmbauchePremierSalarie" required [matDatepicker]="dateEmbauchePremierSalarie">
            <mat-datepicker-toggle matSuffix [for]="dateEmbauchePremierSalarie"></mat-datepicker-toggle>
            <mat-datepicker #dateEmbauchePremierSalarie></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field  appearance="outline">
            <mat-label>Type de piece</mat-label>
            <mat-select formControlName="idType" required>
              <mat-option value="NIN">Carte national d'identite</mat-option>
              <mat-option value="CDEAO">Carte identité CDEAO</mat-option>
              <mat-option value="CONC">Carte Consulaire</mat-option>
              <mat-option value="PASS">Passport</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
          <mat-label>Numero d'identifiant </mat-label>
          <input type="number" matInput formControlName="nin" required>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Nom </mat-label>
          <input type="text" matInput formControlName="firstName" required>
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Prenom </mat-label>
            <input type="text" matInput formControlName="lastName" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Nationalite</mat-label>
            <mat-select formControlName="nationality" required>
              <mat-option *ngFor="let listPay of listPays.items" [value]="listPay.descr">{{listPay.descr  | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>people_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Date Delivrance</mat-label>
            <input matInput formControlName="issuedDate" required [matDatepicker]="issuedDate">
            <mat-datepicker-toggle matSuffix [for]="issuedDate"></mat-datepicker-toggle>
            <mat-datepicker #issuedDate></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Date Expiration</mat-label>
            <input  matInput formControlName="expiryDate" required [matDatepicker]="expiryDate">
            <mat-datepicker-toggle  matSuffix [for]="expiryDate"></mat-datepicker-toggle>
            <mat-datepicker #expiryDate></mat-datepicker>
            <!-- <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon> -->
            <mat-error>Ce champ est obligatoire.</mat-error>
           <!--  <mat-hint class="text-danger" *ngIf="validICN">
              La duree de votre <b class="text-danger">cni</b> validite doit etre de 10 ans.
            </mat-hint>  
            <mat-hint class="text-danger" *ngIf="validPassport">
              La duree de validite du <b class="text-danger">passport</b> doit etre 5 et 10 ans.
            </mat-hint> -->
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Date de naissance</mat-label>
            <input matInput formControlName="dateOfBirth" required [matDatepicker]="dateOfBirth">
            <mat-datepicker-toggle matSuffix [for]="dateOfBirth"></mat-datepicker-toggle>
            <mat-datepicker #dateOfBirth></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Pays de naissance</mat-label>
            <mat-select formControlName="nationality" required>
              <mat-option *ngFor="let listPay of listPays.items" [value]="listPay.descr">{{listPay.descr  | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>people_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Ville de naissance </mat-label>
            <input type="text" matInput formControlName="cityOfBirth" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Ville de naissance </mat-label>
            <input type="number" matInput formControlName="phoneNumber" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Activite principale </mat-label>
            <mat-select (selectionChange)="selectSector($event)" formControlName="mainLineOfBusiness" required>
              <perfect-scrollbar style="height: 100%;">
              <mat-option *ngFor="let mainSector of listactivitePrincipal.items" [value]="mainSector.activitesprincipal">{{ mainSector.activitesprincipal }}</mat-option>
              </perfect-scrollbar>
            </mat-select>
            <mat-icon matSuffix>perm_identity</mat-icon>
            <mat-error>Ce champ est obligatoire</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Ville de naissance </mat-label>
            <input type="email" matInput formControlName="email" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
         
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Secteur d'activite</mat-label>
            <input  matInput formControlName="businessSector" readonly required>  
            <mat-icon matSuffix>perm_identity</mat-icon>
            <mat-error>Ce champ est obligatoire</mat-error>
          </mat-form-field>
          
        </div>
        </div>    
     </mat-step>  
       <mat-step  label="Ajouter salaries" state="person_outlined">
        <div class="mt-5" formArrayName="employeList">
          <ng-template matStepLabel>
            <span [ngStyle]="{'color': immatForm.get('input').get('employeList').valid ? 'rgb(14, 189, 8)' : ''}">Liste des employes
            </span>
          </ng-template>
          <div fxLayout="row" fxLayoutAlign="space-between center">
            <div class="mt-3" fxFlex="50"> 
              <mat-form-field style="width: 70%;"  appearance="outline" class="filter">
                <mat-label>Rechercher un salarie</mat-label>
                <input matInput>
              </mat-form-field>
             </div>  
            <div  class="mt-3" fxLayoutAlign="end" fxLayoutGap="2%">
              <button mat-raised-button class="submit-secondary" (click)="fileInput.click()" color="primary">Importer un fichier .xlsx
                <input hidden #fileInput type="file" (change)=" onFileChange($event)" />
              </button>       
                <button  mat-raised-button class="submit-button-small" (click)="uploadfile()">Charger</button>
            </div>
          </div>
            <!-- <mat-divider class="inset mt-3"></mat-divider> -->
          <table mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="numeroAssureSocial">
              <th mat-header-cell *matHeaderCellDef> Numero securite social </th>
              <td mat-cell *matCellDef="let element"> {{element.nomEmploye}} </td>
            </ng-container>
            <ng-container matColumnDef="nomEmploye">
              <th mat-header-cell *matHeaderCellDef> Nom </th>
              <td mat-cell *matCellDef="let element"> {{element.nomEmploye}} </td>
            </ng-container>
            <ng-container matColumnDef="prenomEmploye">
              <th mat-header-cell *matHeaderCellDef> Prenom </th>
              <td mat-cell *matCellDef="let element"> {{element.prenomEmploye}} </td>
            </ng-container>
            <ng-container matColumnDef="dateNaissance">
              <th mat-header-cell *matHeaderCellDef> Date naissance </th>
              <td mat-cell *matCellDef="let element"> {{element.dateNaissance}} </td>
            </ng-container>
            <ng-container matColumnDef="numPieceIdentite">
              <th mat-header-cell *matHeaderCellDef> Type d'identite </th>
              <td mat-cell *matCellDef="let element"> {{element.typePieceIdentite}} </td>
            </ng-container>
            <ng-container matColumnDef="adresse">
              <th mat-header-cell *matHeaderCellDef>Numero piece </th>
              <td mat-cell *matCellDef="let element"> {{element.nin}} </td>
            </ng-container>
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>Action </th>
              <td mat-cell *matCellDef="let element; let j=index;">
                <button mat-fab  (click)="fillEmpForm(j)"
                  mat-mini-fab>
                  <mat-icon class="edit">edit</mat-icon>
                </button> &nbsp;
                <button mat-fab  mat-mini-fab (click)="removeEmp(j)">
                  <mat-icon class="delete">delete_outline</mat-icon>
                </button> </td>
              <td mat-cell *matCellDef="let element"> </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
          <mat-paginator #paginator [pageSize]="3" [pageSizeOptions]="[3, 5, 10]">
          </mat-paginator>
          <div *ngIf="!maxRgGen" class="mt-2 mb-2" fxLayoutAlign="end" fxLayoutGap="10%">
            <!-- <button [disabled]="!immatForm.get('input').get('employeList').valid" class="addEmp" (click)="addNewEmp()" mat-mini-fab>
              <mat-icon>add</mat-icon>
            </button> -->
            <button class="addEmp" (click)="addNewEmp()" mat-mini-fab>
              <mat-icon>add</mat-icon>
            </button>
          </div>   
        <div *ngFor="let item of immatForm.get('input').get('employeList')['controls']; let i = index;">  
          <div *ngIf="addIndex==i && addEmpForm || editIndex==i && editEmpForm">
          <div [formGroupName]="i">
        <div  fxLayout="row" fxLayoutGap="5%"> 
           <mat-form-field appearance="outline">
             <mat-label>Nom Employé</mat-label>
             <input matInput formControlName="nomEmploye" required>
             <mat-icon matSuffix>email</mat-icon>
             <mat-error>Ce champ est obligatoire.</mat-error>
           </mat-form-field>
           <mat-form-field appearance="outline">
             <mat-label>Prenom Employé</mat-label>
             <input matInput formControlName="prenomEmploye" required>
             <mat-icon matSuffix>email</mat-icon>
             <mat-error>Ce champ est obligatoire.</mat-error>
           </mat-form-field>
          </div>
           <div fxLayout="row" fxLayoutGap="5%">
           <mat-form-field appearance="outline">
              <mat-label>Sexe</mat-label>
              <mat-select formControlName="sexe" required>
                <mat-option value="HOMME" >HOMME</mat-option>
                <mat-option value="FEMME" >FEMME</mat-option>
              </mat-select>
              <mat-icon matSuffix>work_outline</mat-icon>
              <mat-error>Ce champ est obligatoire.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Etat civil</mat-label>
              <mat-select formControlName="etatCivil" required>
                <mat-option value="MAR" >Marié</mat-option>
                <mat-option value="CEL" >Célibataire</mat-option>
                <mat-option value="DIV" >Divorcé</mat-option>
                <mat-option value="VEU" >Veuf/Veuve</mat-option>
              </mat-select>  
              <mat-icon matSuffix>email</mat-icon>
              <mat-error>Ce champ est obligatoire.</mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Date naissance</mat-label>
            <input matInput formControlName="dateNaissance" required [matDatepicker]="dateNaissance">
            <mat-datepicker-toggle matSuffix [for]="dateNaissance"></mat-datepicker-toggle>
            <mat-datepicker #dateNaissance></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field  appearance="outline">
            <mat-label>Nationalite</mat-label>
            <mat-select formControlName="nationalite" required>
              <mat-option *ngFor="let listPay of listPays.items" [value]="listPay.descr">{{listPay.descr  | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Type identite</mat-label>
            <mat-select formControlName="typePieceIdentite" required>
              <mat-option value="NIN">Carte national d'identite</mat-option>
              <mat-option value="PASS">Passport</mat-option>
              <mat-option value="NIN">Carte CDEAO</mat-option>
              <mat-option value="CONC">Carte Consulaire</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Date Delivrance</mat-label>
            <input matInput formControlName="delivreLe" required [matDatepicker]="delivreLe">
            <mat-datepicker-toggle matSuffix [for]="delivreLe"></mat-datepicker-toggle>
            <mat-datepicker #delivreLe></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Date expiration</mat-label>
            <input matInput formControlName="expireLe" required [matDatepicker]="expireLe">
            <mat-datepicker-toggle matSuffix [for]="expireLe"></mat-datepicker-toggle>
            <mat-datepicker #expireLe></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Numero piece</mat-label>
            <input matInput formControlName="nin">
            
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
       <div fxLayout="row" fxLayoutGap="5%">
        <mat-form-field appearance="outline">
          <mat-label>Lieu delivrance</mat-label>
          <input matInput formControlName="lieuDelivrance" required>
          
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Ville de naissance</mat-label>
          <input matInput formControlName="villeNaissance" required>
         
          <mat-error>Ce champ est obligatoire.</mat-error>
        </mat-form-field>
         
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Pays de naissance</mat-label>
            <mat-select formControlName="paysNaissance" required>
              <mat-option *ngFor="let listPay of listPays.items" [value]="listPay.descr">{{listPay.descr  | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field  appearance="outline">
            <mat-label>Pays de residence</mat-label>
            <mat-select formControlName="pays" required>
              <mat-option *ngFor="let listPay of listPays.items" [value]="listPay.descr">{{listPay.descr  | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
         
          <mat-form-field  appearance="outline">
            <mat-label>Region</mat-label>
            <mat-select (selectionChange)="selectRegion($event)"  formControlName="region" required>
              <mat-option  *ngFor="let r of listRegions.items"
               [value]="r.region">{{r.region | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field  appearance="outline">
            <mat-label>Departement</mat-label>
            <mat-select (selectionChange)="selectDepartement($event)"  formControlName="departement" required>
              <mat-option *ngFor="let d of listD2" [value]="d.departement">
                {{d.departement | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Arrondissement</mat-label>
            <mat-select (selectionChange)="selectArrondissement($event)" formControlName="arrondissement" required>
              <mat-option *ngFor="let ar of listA2" [value]="ar.arrondissement">{{ar.arrondissement | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Commune</mat-label>
            <mat-select  (selectionChange)="selectCommne($event)" formControlName="commune" required>
              <mat-option *ngFor="let c of listC2" [value]="c.commune">{{c.commune | titlecase}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Quartier</mat-label>
            <mat-select formControlName="quartier" required>
               <mat-option *ngFor="let q of listQ2" [value]="q.quartier">{{q.quartier | titlecase}}</mat-option> 
            </mat-select>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Adresse</mat-label>
            <input matInput formControlName="adresse" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Boite postal</mat-label>
            <input matInput formControlName="boitePostale">
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field  appearance="outline">
            <mat-label>Type mouvement</mat-label>
            <mat-select formControlName="typeMouvement" required>
              <mat-option value="EMBAUCHE">EMBAUCHE</mat-option>
            </mat-select>  
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
         
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Nature contrat</mat-label>
            <mat-select (selectionChange)="selectContrat(i)"  formControlName="natureContrat" required>
              <mat-option value="CDD">Contrat à durée determiné</mat-option>
              <mat-option value="CDI">Contrat à durée indeterminé</mat-option>
              <mat-option value="JOU">Journalier</mat-option>
              <mat-option value="SPE">Contrat Spécial</mat-option>
              <mat-option value="STA">Contrat de stage</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Date debut contrat</mat-label>
            <input matInput (dateChange)="selectDateEmbauchche(i)" formControlName="dateDebutContrat" required [matDatepicker]="dateDebutContrat">
            <mat-datepicker-toggle matSuffix [for]="dateDebutContrat"></mat-datepicker-toggle>
            <mat-datepicker #dateDebutContrat></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          
        </div>  
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field *ngIf="contrat" appearance="outline">
            <mat-label>Date fin contrat</mat-label>
            <input matInput formControlName="dateFinContrat" required [matDatepicker]="dateFinContrat">
            <mat-datepicker-toggle matSuffix [for]="dateFinContrat"></mat-datepicker-toggle>
            <mat-datepicker #dateFinContrat></mat-datepicker>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Profession</mat-label>
            <input matInput formControlName="profession" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field appearance="outline">
            <mat-label>Emploi</mat-label>
            <input matInput formControlName="emploi" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Employe cadre</mat-label>
            <mat-select formControlName="nonCadre" required> 
              <mat-option value="true">Oui</mat-option>
              <mat-option value="false">Non</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Convention applicable</mat-label>
            <mat-select formControlName="conventionApplicable" required>
              <mat-option value="CC1">CC des entreprises d'assurance, 30 juillet 1977</mat-option>
              <mat-option value="CC2">CC du transport aérien, 08 novembre 1965</mat-option>
              <mat-option value="CC3">CC des industries fédérales du vêtement, 10 janvier 1963</mat-option>
              <mat-option value="CC4">CC du transport routier professionnel, 17 décembre 1959</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Salaire contractuel</mat-label>
            <input matInput formControlName="salaireContractuel" required>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field> 
        </div>
        <div fxLayout="row" fxLayoutGap="5%">
          <mat-form-field  appearance="outline">
            <mat-label>Temps de travail</mat-label>
            <mat-select formControlName="tempsTravail" required>
              <mat-option value="TPS_PLEIN">Temps plein</mat-option>
              <mat-option value="TPS_PARTIEL">Temps partiel</mat-option>
            </mat-select>
            <mat-icon matSuffix>work_outline</mat-icon>
            <mat-error>Ce champ est obligatoire.</mat-error>
          </mat-form-field>
          
        </div>
        <!--         <button *ngIf="addEmpForm"  class="submit-add-edit"  [disabled]="!immatForm.get('input').get('employeList').valid"  mat-raised-button (click)="updateEmp()">Ajouter</button>
-->        
        <button *ngIf="addEmpForm"  class="submit-add-edit"   mat-raised-button (click)="updateEmp(i)">Ajouter</button>
        <button *ngIf="editEmpForm" class="submit-add-edit" [disabled]="!immatForm.get('input').get('employeList').valid"  mat-raised-button (click)="updateEmp(i)">Modifier</button>
      </div>
    </div>
  </div>         
    <div fxLayoutAlign="end" fxLayoutGap="5%">
      <button mat-raised-button mat-button matStepperPrevious><mat-icon>arrow_back</mat-icon>Precedent</button>
      <button mat-raised-button [disabled]="!immatForm.get('input').get('employeList').valid"  class="submit-button"  mat-button matStepperNext>
        Suivant <mat-icon>arrow_forward</mat-icon>
      </button> 
  </div>
</div>
<mat-toolbar class="warn mt-2" *ngIf="maxRgGen">Vous avez atteint le nombre maximale d'employe en regime general</mat-toolbar>
    </mat-step> 


    <!--  ajout documents  -->
    <mat-step  label="Documents à joindre" state="attach_file">
      <div class="mt-5" formArrayName="employeList">
        <ng-template matStepLabel>
          <span [ngStyle]="{'color': immatForm.get('input').get('employeList').valid ? 'rgb(14, 189, 8)' : ''}">Documents à joindre
          </span>
        </ng-template>
<div *ngIf="immatForm.get('input').get('employerQuery').get('employerType').value === 'PVT'">
       <div class="row">
         <div class="col-md-6">
          Demande écrite <span class="required">*</span>
         </div>
         <div class="col-md-6">
          <div class="field">   
            <div class="file">
           
              <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'demandeEcrit')" class="fileInputProfile"></a>
            </div> 


            
          </div>
         </div>
       </div>
       <hr>

       <div class="row">
        <div class="col-md-6">
          Photocopie du registre du commerce <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'registerCommerce')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
          Déclaration d'établissement visée par l'inspection du travail et de la sécurité sociale ou acte notarié <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'declarationEtablissement')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>


      <div class="row">
        <div class="col-md-6">
          Photocopie des statuts ou agrément <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'photocopieStatus')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
          Photocopie de l'avis d'immatriculation la direction de la statistique portant attribution du NINEA  <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'avisImmatriculation')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
          Déclaration du mouvement du travailleur  <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'dmt')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
          Contrat de travail des salariés  <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'contratsTravail')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>



      <div class="row">
        <div class="col-md-6">
          Photocopie carte d'identité nationale de chaque salarié ou carte consulaire si salarié étranger   <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'cni')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>


      <div class="row">
        <div class="col-md-6">
          Un bulletin d'adhésion à remplir ( imprimé à retirer à l'IPRES )   <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'bulletinsSalaire')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
          Photocopie pièce d'identités du gérant <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'carteNationaleIdentite')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>

       
   
    </div>  


    <div *ngIf="immatForm.get('input').get('employerQuery').get('employerType').value === 'TIND'">
      <div class="row">
        <div class="col-md-6">
         Demande écrite <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'demandeEcrit')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>


      <div class="row">
        <div class="col-md-6">
         Decret ou arrêté ministériel ou protocole d'accord ou convention ( pour les projets ) <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'decretMinisteriel')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
         Un bulletin d'adhésion à remplir ( imprimé à retirer à l'IPRES ) <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'bulletinsSalaire')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>
      <hr>

      <div class="row">
        <div class="col-md-6">
         Photocopie légalisée de la Carte nationale d'identité ( pour les nationaux ) et passeport ou carte consulaire ( pour les étrangers ) du demandeur <span class="required">*</span>
        </div>
        <div class="col-md-6">
         <div class="field">   
           <div class="file">
          
             <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'cni')" class="fileInputProfile"></a>
           </div> 


           <!-- (change)="fileChangeEvent($event)" -->
                 
         </div>
        </div>
      </div>  
   </div>  


   <div *ngIf="immatForm.get('input').get('employerQuery').get('employerType').value === 'REP_DIP' || immatForm.get('input').get('employerQuery').get('employerType').value === 'PUB_PARA' ">
    <div class="row">
      <div class="col-md-6">
       Demande écrite <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'demandeEcrit')" class="fileInputProfile"></a>
         </div> 


         <!-- (change)="fileChangeEvent($event)" -->
               
       </div>
      </div>
    </div>
    <hr>


    <div class="row">
      <div class="col-md-6">
       Déclaration d'établissement visée par l'inspection du travail et de la sécurité sociale ou acte notarié <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'declarationEtablissement')" class="fileInputProfile"></a>
         </div> 


         <!-- (change)="fileChangeEvent($event)" -->
               
       </div>
      </div>
    </div>
    <hr>


    <div class="row">
      <div class="col-md-6">
       Déclaration du mouvement du travail <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'dmt')" class="fileInputProfile"></a>
         </div> 

               
       </div>
      </div>
    </div>
    <hr>

    <div class="row">
      <div class="col-md-6">
       Contrat de travail des salariés  <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'contratsTravail')" class="fileInputProfile"></a>
         </div> 


         <!-- (change)="fileChangeEvent($event)" -->
               
       </div>
      </div>
    </div>
    <hr>

    <div class="row">
      <div class="col-md-6">
       Photocopie carte d'identité nationale de chaque salarié ou carte consulaire si salarié étranger <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'carteNationaleIdentite')" class="fileInputProfile"></a>
         </div> 


         <!-- (change)="fileChangeEvent($event)" -->
               
       </div>
      </div>
    </div>
    <hr>

    <div class="row">
      <div class="col-md-6">
       Un bulletin d'adhésion à remplir ( imprimé à retirer à l'IPRES ) <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'bulletinsSalaire')" class="fileInputProfile"></a>
         </div> 


         <!-- (change)="fileChangeEvent($event)" -->
               
       </div>
      </div>
    </div>
    <hr>

    <div class="row">
      <div class="col-md-6">
       Copie Passport <span class="required">*</span>
      </div>
      <div class="col-md-6">
       <div class="field">   
         <div class="file">
        
           <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'passportDoc')" class="fileInputProfile"></a>
         </div> 


         <!-- (change)="fileChangeEvent($event)" -->
               
       </div>
      </div>
    </div>

    

 </div>  



 <div *ngIf="this.immatForm.get('input').get('employerQuery').get('employerType').value === 'NGO'">
  <div class="row">
    <div class="col-md-6">
     Demande écrite <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'demandeEcrit')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>


  <div class="row">
    <div class="col-md-6">
     Déclaration d'établissement visée par l'inspection du travail et de la sécurité sociale ou acte notarié <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'declarationEtablissement')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col-md-6">
     Decret ou arrêté ministériel ou protocole d'accord ou convention ( pour les projets ) <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'decretMinisteriel')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col-md-6">
      Photocopie de l'avis d'immatriculation la direction de la statistique portant attribution du NINEA  <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'avisImmatriculation')" class="fileInputProfile"></a>
       </div> 


             
     </div>
    </div>
  </div>
  <hr>




  <div class="row">
    <div class="col-md-6">
     Déclaration du mouvement du travail <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'dmt')" class="fileInputProfile"></a>
       </div> 

             
     </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col-md-6">
     Contrat de travail des salariés  <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'contratsTravail')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col-md-6">
     Photocopie carte d'identité nationale de chaque salarié ou carte consulaire si salarié étranger <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'cni')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col-md-6">
     Un bulletin d'adhésion à remplir ( imprimé à retirer à l'IPRES ) <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'bulletinsSalaire')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col-md-6">
     Photocopie de la pièce d'identité du gérant <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'carteNationaleIdentite')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>

  

</div>  


<div *ngIf="immatForm.get('input').get('employerQuery').get('employerType').value === 'MAIN'">
  <div class="row">
    <div class="col-md-6">
     Demande écrite <span class="required">*</span>
    </div>
    <div class="col-md-6">
     <div class="field">   
       <div class="file">
      
         <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'demandeEcrit')" class="fileInputProfile"></a>
       </div> 


       <!-- (change)="fileChangeEvent($event)" -->
             
     </div>
    </div>
  </div>
  <hr>



 <div class="row">
  <div class="col-md-6">
    Photocopie des statuts ou agrément <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'photocopieStatus')" class="fileInputProfile"></a>
     </div> 


     <!-- (change)="fileChangeEvent($event)" -->
           
   </div>
  </div>
</div>
<hr>

<div class="row">
  <div class="col-md-6">
    Photocopie de l'avis d'immatriculation la direction de la statistique portant attribution du NINEA  <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'avisImmatriculation')" class="fileInputProfile"></a>
     </div> 


     <!-- (change)="fileChangeEvent($event)" -->
           
   </div>
  </div>
</div>
<hr>

<div class="row">
  <div class="col-md-6">
    Déclaration du mouvement du travailleur  <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'dmt')" class="fileInputProfile"></a>
     </div> 


     <!-- (change)="fileChangeEvent($event)" -->
           
   </div>
  </div>
</div>
<hr>


<div class="row">
  <div class="col-md-6">
    Contrat de travail des salariés  <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'contratsTravail')" class="fileInputProfile"></a>
     </div> 


     <!-- (change)="fileChangeEvent($event)" -->
           
   </div>
  </div>
</div>
<hr>

<div class="row">
  <div class="col-md-6">
    Photocopie carte d'identité nationale de chaque salarié ou carte consulaire si salarié étranger   <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'cni')" class="fileInputProfile"></a>
     </div> 


     <!-- (change)="fileChangeEvent($event)" -->
           
   </div>
  </div>
</div>
<hr>

<div class="row">
  <div class="col-md-6">
    Un bulletin d'adhésion à remplir ( imprimé à retirer à l'IPRES )   <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'bulletinsSalaire')" class="fileInputProfile"></a>
     </div> 


     <!-- (change)="fileChangeEvent($event)" -->
           
   </div>
  </div>
</div>
<hr>

  <div class="row">
   <div class="col-md-6">
     Certificat de travail du dernier employeur <span class="required">*</span>
   </div>
   <div class="col-md-6">
    <div class="field">   
      <div class="file">
     
        <a class="btn btn-sm btn-join-file"> <input type="file" class="fileInputProfile"></a>
      </div> 


      <!-- (change)="fileChangeEvent($event)" -->
            
    </div>
   </div>
 </div>
 <hr>

 <div class="row">
   <div class="col-md-6">
     Photocopie légalisée de la carte nationale d'identité ( pour les nationaux ) et passport ou carte consulaire ( pour les étrangers du demandeur ) <span class="required">*</span>
   </div>
   <div class="col-md-6">
    <div class="field">   
      <div class="file">
     
        <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'carteNationaleIdentite')" class="fileInputProfile"></a>
      </div> 


      <!-- (change)="fileChangeEvent($event)" -->
            
    </div>
   </div>
 </div>
 <hr>

 <div class="row">
   <div class="col-md-6">
     Photocopie pièce d'identités de l'emloyeur <span class="required">*</span>
   </div>
   <div class="col-md-6">
    <div class="field">   
      <div class="file">
     
        <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'cni')" class="fileInputProfile"></a>
      </div> 


      <!-- (change)="fileChangeEvent($event)" -->
            
    </div>
   </div>
 </div>
 <hr>

 <div class="row">
  <div class="col-md-6">
    Photocopie pièce d'identités du gérant <span class="required">*</span>
  </div>
  <div class="col-md-6">
   <div class="field">   
     <div class="file">
    
       <a class="btn btn-sm btn-join-file"> <input type="file" (change)="fileChangeEvent($event,'carteNationaleIdentite')" class="fileInputProfile"></a>
     </div> 


           
   </div>
  </div>
</div>

</div>  



</div>



<div class="mt-3" fxLayoutAlign="end" fxLayoutGap="10%">
  <button mat-raised-button  class="submit-button"  mat-button matStepperNext>
    Suivant <mat-icon>arrow_forward</mat-icon>
  </button> 
</div>
  </mat-step> 
  









<!--   <mat-step editable="false" label="Comfirmation" class="mt-1" state="done_all">
  <div class="mt-3" fxLayoutAlign="end" fxLayoutGap="10%">
    <button mat-raised-button mat-button matStepperPrevious>Precedent</button>
    <button class="submit-button" mat-raised-button  type="submit" (click)="addImmatriculation()" class="submit-button" mat-button matStepperNext>Confirmer</button>
  </div>
  </mat-step> -->
  <mat-step editable="false" label="Comfirmation" class="mt-1" state="done_all">
          <ng-template matStepLabel>
           <span [ngStyle]="{'color': immatForm.get('input').valid ? 'rgb(14, 189, 8)' : ''}"> Comfirmation</span>
          </ng-template> 
          <h4 class="mt-2 mb-2">Confirmation Demande</h4><br>
          <div class="report_infoFen pb-5">
         <mat-icon class="icon">person_outline</mat-icon> <h5 >Information General</h5><br>
         <!-- <mat-divider class="inset"></mat-divider> -->
         <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b> Nom de l'entreprise</b>
              &nbsp;
               <span>{{shortName.value}}</span>
            </div>
            <div fxFlex="50">
                <b>Principal Secteur d'activite</b>
                &nbsp;
                <span> {{mainLineOfBusiness.value | titlecase}}</span>
            </div>     
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Secteur d'activite</b>
              &nbsp;
             <span> {{businessSector.value}}</span>
          </div>
           <div fxFlex="50">
              <b>Date d'inspection</b>
              &nbsp;
               <span> {{immatForm.get('input').get('mainRegistrationForm').get('dateOfInspection').value | date:'shortDate'}}</span>
            </div> 
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
         <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
              <div fxFlex="50">
                <b>Date d'ouverture</b>
                &nbsp;
                <span>{{immatForm.get('input').get('mainRegistrationForm').get('dateOfFirstHire').value}}</span>
              </div>
          <div fxFlex="50">
              <b>Region</b>
              &nbsp;
              <span> {{region.value | titlecase}}</span>
            </div> 
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
           <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Departement</b>
              &nbsp;
              <span> {{department.value | titlecase}}</span>
            </div>
            <div fxFlex="50">
                <b>Arrondissement</b>
                &nbsp;
                <span> {{arondissement.value | titlecase}}</span>
            </div>   
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
         <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Commune</b>
              &nbsp;   
              <span> {{commune.value | titlecase}}</span>
          </div> 
            <div fxFlex="50">
              <b>Quartie</b>
              &nbsp;
              <span> {{qartier.value}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
           <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Adresse:</b>
              <span>  {{address.value}}</span>
            </div>  
          <div fxFlex="50">
            <b>Telephone</b>
            &nbsp;
            <span> {{telephone.value}}</span>
        </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Email entreprise</b>
              &nbsp;
             <span> {{email.value}}</span>
            </div>
            <div fxFlex="50">
              <b>Site Web</b>
              &nbsp;
              <span> {{website.value}}</span>
            </div>
          </div>
         <!--  <mat-divider class="inset"></mat-divider> -->
        </div>
          <div class="report_infoEmpl pb-5 mt-3">
              <mat-icon class="icon">person_outline</mat-icon> <h5 >Information Employeur</h5><br> 
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
             <div fxFlex="50">
              <b>Type employeur</b>
              &nbsp;
            <span> {{employerType.value}}</span> 
            </div> 
            <div fxFlex="50">
              <b>Type etablissement</b>
              &nbsp;
              <span>{{typeEtablissement.value}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
         <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Nom employeur</b>
              &nbsp;
              <span>{{employerName.value}}</span>
            </div>
            <div fxFlex="50">
              <b>Numero ninea</b>
              &nbsp;
              <span>{{nineaNumber.value}}</span>
            </div>
          </div>
         <!--  <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Numero ninet</b>
              &nbsp;
             <span> {{regType.value}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
        </div>
        <div class="report_repLeagl pb-5">  
          <mat-icon class="icon">person_outline</mat-icon>  <h5>Representant Legal</h5><br>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Nom</b>
             <span> {{lastName.value}} </span>
            </div>
            <div fxFlex="50">
              <b>Prenom</b>
              &nbsp;
              <span>  {{ firstName.value }}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
       
          <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Date de naissance</b>
              &nbsp;
             <span> {{ immatForm.get('input').get('legalRepresentativeForm').get('birthdate').value | date:'shortDate'}}</span>
            </div>
            <div fxFlex="50">
              <b>Naionalite</b>
              &nbsp;
              <span>  {{nationality.value | titlecase}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Lieu de naissance</b>
              &nbsp;
            <span>  {{placeOfBirth.value }}</span>
            </div>
            <div fxFlex="50">
              <b>Ville de Naissance</b>
              &nbsp;
              <span>  {{cityOfBirth.value}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
           <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Type de piece</b>
              &nbsp;
            <span>  {{typeOfIdentity.value}}</span>
            </div>
            <div fxFlex="50">
              <b>Numero piece d'identite</b>
              &nbsp;
              <span>  {{nin.value}} </span>
            </div>
          </div> 
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>NIN CEDEAO</b>
              &nbsp;
             <span> {{ninCedeo.value}} </span>
            </div>
            <div fxFlex="50">
              <b>Date delivrance</b>
              &nbsp;
              <span>  {{immatForm.get('input').get('legalRepresentativeForm').get('issuedDate').value | date:'shortDate'}} </span>
            </div>
          </div>
          <mat-divider class="inset"></mat-divider>
          <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Date d'expiration</b>
              &nbsp;
            <span> {{immatForm.get('input').get('legalRepresentativeForm').get('expiryDate').value | date:'shortDate'}}</span> 
            </div>
            <div fxFlex="50">
              <b>Region</b>
              &nbsp;
              <span>  {{region1.value | titlecase}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Department</b>
              &nbsp;
            <span>  {{department1.value | titlecase}}</span>
            </div>
            <div fxFlex="50">
              <b>Arondissement</b>
              &nbsp;
              <span> {{arondissement1.value | titlecase}}</span> 
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Commune</b>
              &nbsp;
            <span>  {{ commune1.value | titlecase}}</span>
            </div>
            <div fxFlex="50">
              <b>quartier</b>
              &nbsp;
              <span>  {{qartier1.value}}</span>
            </div>
          </div>
         <!--  <mat-divider class="inset"></mat-divider> -->
          <div  fxLayout="row" class="back_report pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>Email</b>
              <span> {{email1.value}}</span>
            </div>
            <div fxFlex="50">
              <b>Numero Telephone</b>
              &nbsp;
               <span> {{mobileNumber.value}}</span>
            </div>
          </div>
          <!-- <mat-divider class="inset"></mat-divider> -->
          <div fxLayout="row" class="back_report1 pt-3 pb-3 pl-3" fxLayoutGap="5%">
            <div fxFlex="50">
              <b>addresse</b>
              &nbsp;
             <span> {{address1.value}}</span>
            </div>
          </div> 
          <!-- <mat-divider class="inset"></mat-divider> -->
        </div> 
        <div class="mt-3" fxLayoutAlign="end" fxLayoutGap="10%">
          <button mat-raised-button mat-button matStepperPrevious>Precedent</button>
          <button class="submit-button" mat-raised-button  type="submit" (click)="addImmatriculation()" class="submit-button" mat-button matStepperNext>Confirmer</button>
        </div>
        </mat-step> 
        <ng-template matStepperIcon="phone">
               <mat-icon> create_new_folder</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="chat">
          <mat-icon>library_books</mat-icon>
        </ng-template> 
        <ng-template matStepperIcon="person_outlined">
          <mat-icon>person_outlined</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="folder_open">
          <mat-icon>folder_open</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="folder">
          <mat-icon>file</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="done_all">
          <mat-icon>done_all</mat-icon>
        </ng-template>
  </mat-horizontal-stepper>
</form>
</div>
